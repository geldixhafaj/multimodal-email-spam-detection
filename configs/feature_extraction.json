
# ============================================
# feature_extraction.json generator
# ============================================
# Geldi Xhafaj â€“ MSc Dissertation
# Creates a complete JSON snapshot of the structural-feature pipeline.
# --------------------------------------------
import os, json, re
from datetime import datetime
import numpy as np

# ---------- 0) OUTPUT PATHS ----------
OUT_DIR = "/content/outputs_features"
os.makedirs(OUT_DIR, exist_ok=True)
JSON_PATH = os.path.join(OUT_DIR, "feature_extraction.json")

# ---------- 1) INPUTS (EDIT / CONFIRM) ----------
# 1.1 Feature names (EXACT order used at inference)
struct_feature_names = [
    "url_count",
    "uppercase_ratio",
    "digit_count",
    "currency_symbol_flag",
    "punct_density",
    "html_presence",
    # replace placeholders below with your actual remaining names IN ORDER:
    "struct_f7","struct_f8","struct_f9","struct_f10","struct_f11","struct_f12","struct_f13"
]
assert len(struct_feature_names) == 13, "You must provide exactly 13 structural feature names."

# 1.2 Paths to saved matrices (produced in Notebook 05)
# If you already have these arrays in memory, you can write them to disk
#   e.g., np.save("/content/struct_features/train_struct.npy", train_struct)
struct_root = "/content/struct_features"
train_path = os.path.join(struct_root, "train_struct.npy")
val_path   = os.path.join(struct_root, "val_struct.npy")
test_path  = os.path.join(struct_root, "test_struct.npy")
y_train_path = os.path.join(struct_root, "train_labels.npy")
y_val_path   = os.path.join(struct_root, "val_labels.npy")
y_test_path  = os.path.join(struct_root, "test_labels.npy")

# If not saved previously, uncomment and adapt:
# np.save(train_path, train_struct) ; np.save(val_path, val_struct) ; np.save(test_path, test_struct)
# np.save(y_train_path, y_train)    ; np.save(y_val_path, y_val)    ; np.save(y_test_path, y_test)

# 1.3 Load arrays (shapes should be [(4011,13), (446,13), (1115,13)])
train_struct = np.load(train_path)  # (N_train, 13)
val_struct   = np.load(val_path)    # (N_val, 13)
test_struct  = np.load(test_path)   # (N_test, 13)

y_train = np.load(y_train_path)     # (N_train,)
y_val   = np.load(y_val_path)       # (N_val,)

